# spring.application.name=demo
# server.port=8080
# # Cấu hình kết nối SQL Server
# spring.datasource.url=jdbc:sqlserver://localhost:1433;databaseName=school;encrypt=true;trustServerCertificate=true
# # Sửa sa thành student
# spring.datasource.username=student
# # Mật khẩu vẫn là 123456
# spring.datasource.password=123456

# # Cấu hình JPA/Hibernate
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=true
# spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect
# server.forward-headers-strategy=framework
# # Tắt cache để khi sửa HTML không cần restart server
# spring.thymeleaf.cache=false
####
spring.application.name=demo
server.port=8080

# --- CẤU HÌNH THÔNG MINH (TỰ ĐỘNG CHUYỂN ĐỔI) ---

# 1. URL Database
# Giải thích: Cấu trúc ${TÊN_BIẾN:Gia_tri_mac_dinh}
# Nếu trên Render (có biến DB_URL) -> Nó dùng PostgreSQL.
# Nếu trên máy bạn (không có biến) -> Nó dùng SQL Server (sau dấu hai chấm).
spring.datasource.url=${DB_URL:jdbc:sqlserver://localhost:1433;databaseName=school;encrypt=true;trustServerCertificate=true}

# 2. Tài khoản & Mật khẩu
spring.datasource.username=${DB_USERNAME:student}
spring.datasource.password=${DB_PASSWORD:123456}

# 3. Driver (Cái này quan trọng nhất để không bị lỗi driver)
spring.datasource.driver-class-name=${DB_DRIVER_CLASS:com.microsoft.sqlserver.jdbc.SQLServerDriver}

# --- CẤU HÌNH KHÁC ---
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# QUAN TRỌNG: Bạn PHẢI XÓA hoặc COMMENT dòng "dialect" dưới đây.
# Lý do: Nếu để cứng là SQLServerDialect, khi lên Render chạy PostgreSQL nó sẽ bị xung đột và lỗi.
# spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect

server.forward-headers-strategy=framework
spring.thymeleaf.cache=false